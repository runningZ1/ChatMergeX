# ChatMergeX - æŠ€æœ¯æ¶æ„æ–‡æ¡£

**ç‰ˆæœ¬**: v1.0
**æ—¥æœŸ**: 2025-01-06
**çŠ¶æ€**: æ¶æ„è®¾è®¡é˜¶æ®µ

---

## ç›®å½•

1. [æ¶æ„æ¦‚è¿°](#1-æ¶æ„æ¦‚è¿°)
2. [æŠ€æœ¯æ ˆ](#2-æŠ€æœ¯æ ˆ)
3. [ç³»ç»Ÿæ¶æ„](#3-ç³»ç»Ÿæ¶æ„)
4. [é¡¹ç›®ç»“æ„](#4-é¡¹ç›®ç»“æ„)
5. [æ ¸å¿ƒæ¨¡å—è®¾è®¡](#5-æ ¸å¿ƒæ¨¡å—è®¾è®¡)
6. [æ•°æ®æµè®¾è®¡](#6-æ•°æ®æµè®¾è®¡)
7. [é€šä¿¡æœºåˆ¶](#7-é€šä¿¡æœºåˆ¶)
8. [æ€§èƒ½ä¼˜åŒ–ç­–ç•¥](#8-æ€§èƒ½ä¼˜åŒ–ç­–ç•¥)
9. [å®‰å…¨è®¾è®¡](#9-å®‰å…¨è®¾è®¡)

---

## 1. æ¶æ„æ¦‚è¿°

### 1.1 æ•´ä½“æ¶æ„

ChatMergeX é‡‡ç”¨**å‰ç«¯ä¸ºä¸»çš„æ¶æ„**ï¼Œç”±ä¸¤ä¸ªæ ¸å¿ƒéƒ¨åˆ†ç»„æˆï¼š

1. **Web åº”ç”¨**ï¼šåŸºäº React çš„å•é¡µåº”ç”¨ï¼Œè´Ÿè´£ UI å±•ç¤ºå’Œç”¨æˆ·äº¤äº’
2. **æµè§ˆå™¨æ’ä»¶**ï¼šChrome Extensionï¼Œè´Ÿè´£æ•°æ®åŒæ­¥å’Œå†…å®¹æŠ“å–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·æµè§ˆå™¨                              â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  AI å¹³å°é¡µé¢     â”‚         â”‚  ChatMergeX      â”‚        â”‚
â”‚  â”‚  (ChatGPT/è±†åŒ…)  â”‚         â”‚  Web åº”ç”¨        â”‚        â”‚
â”‚  â”‚                 â”‚         â”‚                 â”‚        â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚        â”‚
â”‚  â”‚  â”‚ Content   â”‚  â”‚         â”‚  â”‚  React    â”‚  â”‚        â”‚
â”‚  â”‚  â”‚ Script    â”‚â—„â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â–ºâ”‚  App      â”‚  â”‚        â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚        â”‚        â”‚        â”‚
â”‚           â”‚                  â”‚        â–¼        â”‚        â”‚
â”‚           â”‚                  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚        â”‚
â”‚           â”‚                  â”‚  â”‚ IndexedDB â”‚  â”‚        â”‚
â”‚           â”‚                  â”‚  â”‚ (Dexie.js)â”‚  â”‚        â”‚
â”‚           â”‚                  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚        â”‚
â”‚           â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚           â–¼                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚  Background     â”‚                                    â”‚
â”‚  â”‚  Service Worker â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 æ¶æ„ç‰¹ç‚¹

- **æœ¬åœ°ä¼˜å…ˆ**ï¼šæ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨æµè§ˆå™¨æœ¬åœ°ï¼Œæ— éœ€æœåŠ¡å™¨
- **å®æ—¶åŒæ­¥**ï¼šæ’ä»¶å®æ—¶ç›‘å¬é¡µé¢å˜åŒ–ï¼Œè‡ªåŠ¨åŒæ­¥
- **æ¾è€¦åˆ**ï¼šWeb åº”ç”¨å’Œæ’ä»¶é€šè¿‡æ¶ˆæ¯é€šä¿¡ï¼Œå¯ç‹¬ç«‹å¼€å‘
- **ç¦»çº¿å¯ç”¨**ï¼šWeb åº”ç”¨æ”¯æŒ PWAï¼Œç¦»çº¿ä¹Ÿèƒ½æŸ¥çœ‹å†å²æ•°æ®

### 1.3 æŠ€æœ¯é€‰å‹åŸåˆ™

- **æˆç†Ÿç¨³å®š**ï¼šä¼˜å…ˆé€‰æ‹©ç»è¿‡éªŒè¯çš„ä¸»æµæŠ€æœ¯
- **è½»é‡é«˜æ•ˆ**ï¼šé¿å…è¿‡åº¦å·¥ç¨‹åŒ–ï¼Œä¿æŒç®€æ´
- **æ˜“äºç»´æŠ¤**ï¼šä»£ç å¯è¯»æ€§å¥½ï¼Œæ–‡æ¡£å®Œå–„
- **ç”¨æˆ·ä½“éªŒ**ï¼šæ€§èƒ½ä¼˜å…ˆï¼Œå¿«é€Ÿå“åº”

---

## 2. æŠ€æœ¯æ ˆ

### 2.1 Web åº”ç”¨æŠ€æœ¯æ ˆ

#### æ ¸å¿ƒæ¡†æ¶
- **Next.js 15**: React å…¨æ ˆæ¡†æ¶ (åŸºäº React 18)
- **TypeScript 5**: ç±»å‹å®‰å…¨å’Œä»£ç æç¤º

#### UI ç›¸å…³
- **shadcn/ui**: åŸºäº Radix UI çš„ç»„ä»¶åº“
- **Tailwind CSS 3**: åŸå­åŒ– CSS æ¡†æ¶
- **Radix UI**: æ— æ ·å¼çš„å¯è®¿é—®ç»„ä»¶
- **Lucide Icons**: å›¾æ ‡åº“

#### çŠ¶æ€ç®¡ç†
- **Zustand**: è½»é‡çº§çŠ¶æ€ç®¡ç†
  - ç®€å•ç›´è§‚çš„ API
  - æ— æ ·æ¿ä»£ç 
  - æ”¯æŒ TypeScript

#### è·¯ç”±
- **Next.js App Router**: åŸºäºæ–‡ä»¶ç³»ç»Ÿçš„è·¯ç”±
  - æ”¯æŒåµŒå¥—è·¯ç”±å’Œå¸ƒå±€
  - æ”¯æŒæœåŠ¡ç«¯ç»„ä»¶ (Server Components)
  - è‡ªåŠ¨ä»£ç åˆ†å‰²

#### æ•°æ®å­˜å‚¨
- **Dexie.js**: IndexedDB å°è£…åº“
  - ç±» SQL çš„æŸ¥è¯¢ API
  - æ”¯æŒå¤æ‚ç´¢å¼•
  - TypeScript å‹å¥½

#### äº§å“åˆ†æ
- **PostHog**: äº§å“åˆ†æå’Œç”¨æˆ·è¡Œä¸ºè¿½è¸ª
  - æ•°æ®é©±åŠ¨å†³ç­–
  - ç”¨æˆ·è¡Œä¸ºæ´å¯Ÿ

#### å†…å®¹æ¸²æŸ“
- **react-markdown**: Markdown æ¸²æŸ“
- **prism-react-renderer**: ä»£ç é«˜äº®
- **rehype-raw**: æ”¯æŒ HTML æ ‡ç­¾
- **remark-gfm**: GitHub Flavored Markdown

#### å·¥å…·åº“
- **date-fns**: æ—¥æœŸå¤„ç†
- **react-window**: è™šæ‹Ÿæ»šåŠ¨
- **react-dnd**: æ‹–æ‹½åŠŸèƒ½
- **fuse.js**: æ¨¡ç³Šæœç´¢
- **zustand**: çŠ¶æ€æŒä¹…åŒ–

### 2.2 æµè§ˆå™¨æ’ä»¶æŠ€æœ¯æ ˆ

#### æ ¸å¿ƒæŠ€æœ¯
- **Manifest V3**: Chrome Extension æœ€æ–°æ ‡å‡†
- **TypeScript 5**: ç±»å‹å®‰å…¨
- **Webpack 5**: æ‰“åŒ…æ„å»º

#### æ’ä»¶ API
- **chrome.storage**: å­˜å‚¨æ’ä»¶é…ç½®
- **chrome.runtime**: æ¶ˆæ¯é€šä¿¡
- **chrome.tabs**: æ ‡ç­¾é¡µç®¡ç†
- **chrome.scripting**: åŠ¨æ€æ³¨å…¥è„šæœ¬

#### DOM è§£æ
- **DOMParser**: åŸç”Ÿ DOM è§£æ
- **MutationObserver**: ç›‘å¬é¡µé¢å˜åŒ–

### 2.3 å¼€å‘å·¥å…·

#### ä»£ç è´¨é‡
- **ESLint**: ä»£ç æ£€æŸ¥
- **Prettier**: ä»£ç æ ¼å¼åŒ–
- **TypeScript**: ç±»å‹æ£€æŸ¥
- **husky**: Git Hooks

#### æµ‹è¯•
- **Vitest**: å•å…ƒæµ‹è¯•æ¡†æ¶
- **Testing Library**: React ç»„ä»¶æµ‹è¯•
- **Playwright**: E2E æµ‹è¯•ï¼ˆå¯é€‰ï¼‰

#### éƒ¨ç½²
- **Vercel**: Web åº”ç”¨éƒ¨ç½²
- **Chrome Web Store**: æ’ä»¶å‘å¸ƒ

---

## 3. ç³»ç»Ÿæ¶æ„

### 3.1 åˆ†å±‚æ¶æ„

Web åº”ç”¨é‡‡ç”¨ç»å…¸çš„åˆ†å±‚æ¶æ„ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Presentation Layer             â”‚  å±•ç¤ºå±‚
â”‚         (React Components)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           Business Layer                â”‚  ä¸šåŠ¡å±‚
â”‚      (Stores + Custom Hooks)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            Data Layer                   â”‚  æ•°æ®å±‚
â”‚         (Dexie.js + IndexedDB)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         Communication Layer             â”‚  é€šä¿¡å±‚
â”‚        (Message Bridge)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å±•ç¤ºå±‚**ï¼š
- React ç»„ä»¶
- shadcn/ui ç»„ä»¶
- é¡µé¢è·¯ç”±

**ä¸šåŠ¡å±‚**ï¼š
- Zustand Storesï¼ˆçŠ¶æ€ç®¡ç†ï¼‰
- Custom Hooksï¼ˆä¸šåŠ¡é€»è¾‘å°è£…ï¼‰
- å·¥å…·å‡½æ•°

**æ•°æ®å±‚**ï¼š
- Dexie.js æ•°æ®åº“æ“ä½œ
- æ•°æ®æ¨¡å‹å®šä¹‰
- ç´¢å¼•å’ŒæŸ¥è¯¢

**é€šä¿¡å±‚**ï¼š
- æ’ä»¶æ¶ˆæ¯æ¥æ”¶
- æ•°æ®åŒæ­¥å¤„ç†
- é”™è¯¯å¤„ç†

### 3.2 æµè§ˆå™¨æ’ä»¶æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Content Scripts                 â”‚
â”‚    (æ³¨å…¥åˆ° AI å¹³å°é¡µé¢)                   â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ ChatGPT  â”‚      â”‚  è±†åŒ…     â”‚        â”‚
â”‚  â”‚ Parser   â”‚      â”‚  Parser   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ chrome.runtime.sendMessage
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Background Service Worker          â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Message    â”‚   â”‚  Storage    â”‚     â”‚
â”‚  â”‚  Router     â”‚   â”‚  Manager    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ window.postMessage
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Web Application                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Content Scripts**ï¼š
- ç›‘å¬é¡µé¢ DOM å˜åŒ–
- è§£æå¯¹è¯å†…å®¹
- æå–å¯Œæ–‡æœ¬æ ¼å¼
- å‘é€åˆ° Background

**Background Service Worker**ï¼š
- æ¥æ”¶ Content Scripts æ¶ˆæ¯
- æ•°æ®å¤„ç†å’Œè½¬æ¢
- è½¬å‘åˆ° Web åº”ç”¨
- ç®¡ç†æ’ä»¶é…ç½®

---

## 4. é¡¹ç›®ç»“æ„

### 4.1 Web åº”ç”¨ç›®å½•ç»“æ„

```
web-app/
â”œâ”€â”€ public/                     # é™æ€èµ„æº
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â””â”€â”€ manifest.json          # PWA é…ç½®
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ (main)/             # ä¸»å¸ƒå±€è·¯ç”±ç»„
â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx      # ä¸»å¸ƒå±€ (åŒ…å« Sidebar)
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx        # ä¸»é¡µ (/)
â”‚   â”‚   â”‚   â”œâ”€â”€ conversation/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ page.tsx # å¯¹è¯è¯¦æƒ…é¡µ
â”‚   â”‚   â”‚   â””â”€â”€ settings/
â”‚   â”‚   â”‚       â””â”€â”€ page.tsx    # è®¾ç½®é¡µ
â”‚   â”‚   â”œâ”€â”€ welcome/            # æ¬¢è¿é¡µ (æ—  Sidebar çš„ç‹¬ç«‹å¸ƒå±€)
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â””â”€â”€ layout.tsx          # æ ¹å¸ƒå±€ (<html> å’Œ <body>)
â”‚   â”‚
â”‚   â”œâ”€â”€ components/             # React ç»„ä»¶ (ä¸ä¹‹å‰ç±»ä¼¼)
â”‚   â”‚   â”œâ”€â”€ ui/               # shadcn/ui ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ layout/           # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ conversation/     # å¯¹è¯ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ folder/           # æ–‡ä»¶å¤¹ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ search/           # æœç´¢ç›¸å…³ç»„ä»¶
â”‚   â”‚   â””â”€â”€ common/           # é€šç”¨ç»„ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ stores/               # Zustand çŠ¶æ€ç®¡ç† (ä¸å˜)
â”‚   â”œâ”€â”€ db/                   # æ•°æ®åº“ (ä¸å˜)
â”‚   â”œâ”€â”€ hooks/                # è‡ªå®šä¹‰ Hooks (ä¸å˜)
â”‚   â”œâ”€â”€ utils/                # å·¥å…·å‡½æ•° (ä¸å˜)
â”‚   â”œâ”€â”€ types/                # TypeScript ç±»å‹ (ä¸å˜)
â”‚   â”œâ”€â”€ constants/            # å¸¸é‡å®šä¹‰ (ä¸å˜)
â”‚   â””â”€â”€ lib/                  # ç¬¬ä¸‰æ–¹åº“é…ç½®
â”‚       â””â”€â”€ utils.ts          # shadcn/ui å·¥å…·å‡½æ•°
â”‚
â”œâ”€â”€ .eslintrc.json            # ESLint é…ç½® (Next.js æ¨è .json)
â”œâ”€â”€ .prettierrc               # Prettier é…ç½®
â”œâ”€â”€ tsconfig.json             # TypeScript é…ç½®
â”œâ”€â”€ next.config.mjs           # Next.js é…ç½®æ–‡ä»¶
â”œâ”€â”€ tailwind.config.ts        # Tailwind CSS é…ç½®
â”œâ”€â”€ postcss.config.js         # PostCSS é…ç½®
â”œâ”€â”€ components.json           # shadcn/ui é…ç½®
â””â”€â”€ package.json              # ä¾èµ–å’Œè„šæœ¬
```

### 4.2 æµè§ˆå™¨æ’ä»¶ç›®å½•ç»“æ„

```
browser-extension/
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ icons/                # æ’ä»¶å›¾æ ‡
â”‚   â”‚   â”œâ”€â”€ icon16.png
â”‚   â”‚   â”œâ”€â”€ icon48.png
â”‚   â”‚   â””â”€â”€ icon128.png
â”‚   â””â”€â”€ manifest.json         # Manifest V3 é…ç½®
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ background/           # Background Service Worker
â”‚   â”‚   â”œâ”€â”€ index.ts          # ä¸»å…¥å£
â”‚   â”‚   â”œâ”€â”€ messageHandler.ts # æ¶ˆæ¯å¤„ç†
â”‚   â”‚   â”œâ”€â”€ storageManager.ts # å­˜å‚¨ç®¡ç†
â”‚   â”‚   â””â”€â”€ syncManager.ts    # åŒæ­¥ç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ content/              # Content Scripts
â”‚   â”‚   â”œâ”€â”€ common/           # é€šç”¨é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ BaseParser.ts # è§£æå™¨åŸºç±»
â”‚   â”‚   â”‚   â”œâ”€â”€ DOMWatcher.ts # DOM ç›‘å¬
â”‚   â”‚   â”‚   â””â”€â”€ bridge.ts     # é€šä¿¡æ¡¥æ¥
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ chatgpt/          # ChatGPT åŒæ­¥
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ parser.ts     # å†…å®¹è§£æ
â”‚   â”‚   â”‚   â””â”€â”€ selectors.ts  # CSS é€‰æ‹©å™¨
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ doubao/           # è±†åŒ…åŒæ­¥
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ parser.ts
â”‚   â”‚   â”‚   â””â”€â”€ selectors.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ inject.ts         # æ³¨å…¥è„šæœ¬
â”‚   â”‚
â”‚   â”œâ”€â”€ popup/                # æ’ä»¶å¼¹çª—
â”‚   â”‚   â”œâ”€â”€ Popup.tsx         # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ popup.html        # HTML æ¨¡æ¿
â”‚   â”‚   â””â”€â”€ popup.css         # æ ·å¼
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ parser.ts         # é€šç”¨è§£æ
â”‚   â”‚   â”œâ”€â”€ storage.ts        # å­˜å‚¨å·¥å…·
â”‚   â”‚   â”œâ”€â”€ logger.ts         # æ—¥å¿—å·¥å…·
â”‚   â”‚   â””â”€â”€ validator.ts      # æ•°æ®éªŒè¯
â”‚   â”‚
â”‚   â””â”€â”€ types/                # TypeScript ç±»å‹
â”‚       â”œâ”€â”€ message.ts        # æ¶ˆæ¯ç±»å‹
â”‚       â”œâ”€â”€ storage.ts        # å­˜å‚¨ç±»å‹
â”‚       â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ webpack.config.js         # Webpack é…ç½®
â”œâ”€â”€ tsconfig.json             # TypeScript é…ç½®
â””â”€â”€ package.json              # ä¾èµ–å’Œè„šæœ¬
```

---

## 5. æ ¸å¿ƒæ¨¡å—è®¾è®¡

### 5.1 æ•°æ®å­˜å‚¨æ¨¡å—ï¼ˆDexie.jsï¼‰

```typescript
// src/db/database.ts
import Dexie, { Table } from 'dexie';
import { Conversation, Folder, UserSettings } from './schema';

export class ChatMergeXDatabase extends Dexie {
  conversations!: Table<Conversation>;
  folders!: Table<Folder>;
  settings!: Table<UserSettings>;

  constructor() {
    super('chatmergex_db');

    this.version(1).stores({
      conversations: 'id, platform, folderId, createdAt, updatedAt, title',
      folders: 'id, parentId, name, order',
      settings: 'id'
    });
  }
}

export const db = new ChatMergeXDatabase();
```

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- å¯¹è¯è®°å½• CRUD
- æ–‡ä»¶å¤¹ç®¡ç†
- å…¨æ–‡æœç´¢
- æ‰¹é‡æ“ä½œ
- æ•°æ®å¯¼å‡º

### 5.2 çŠ¶æ€ç®¡ç†æ¨¡å—ï¼ˆZustandï¼‰

```typescript
// src/stores/conversationStore.ts
import { create } from 'zustand';
import { Conversation } from '@/types';
import { db } from '@/db/database';

interface ConversationStore {
  conversations: Conversation[];
  selectedId: string | null;
  loading: boolean;

  // Actions
  fetchConversations: () => Promise<void>;
  selectConversation: (id: string) => void;
  addConversation: (conv: Conversation) => Promise<void>;
  updateConversation: (id: string, updates: Partial<Conversation>) => Promise<void>;
  deleteConversation: (id: string) => Promise<void>;
  batchDelete: (ids: string[]) => Promise<void>;
}

export const useConversationStore = create<ConversationStore>((set, get) => ({
  conversations: [],
  selectedId: null,
  loading: false,

  fetchConversations: async () => {
    set({ loading: true });
    const conversations = await db.conversations.toArray();
    set({ conversations, loading: false });
  },

  // ... å…¶ä»– actions
}));
```

**Store åˆ—è¡¨**ï¼š
- `conversationStore`: å¯¹è¯ç®¡ç†
- `folderStore`: æ–‡ä»¶å¤¹ç®¡ç†
- `settingsStore`: ç”¨æˆ·è®¾ç½®
- `searchStore`: æœç´¢çŠ¶æ€
- `syncStore`: åŒæ­¥çŠ¶æ€

### 5.3 åŒæ­¥æ¨¡å—

#### æ’ä»¶ç«¯ï¼ˆContent Scriptï¼‰

```typescript
// browser-extension/src/content/chatgpt/parser.ts
export class ChatGPTParser {
  // è§£æå¯¹è¯åˆ—è¡¨
  parseConversationList(): Conversation[] {
    const elements = document.querySelectorAll('[data-testid^="conversation-"]');
    return Array.from(elements).map(el => this.parseConversation(el));
  }

  // è§£æå•ä¸ªå¯¹è¯
  parseConversation(element: Element): Conversation {
    const title = element.querySelector('.conversation-title')?.textContent || '';
    const url = element.querySelector('a')?.href || '';
    // ... æ›´å¤šè§£æé€»è¾‘

    return {
      id: generateId(),
      platform: 'chatgpt',
      title,
      url,
      createdAt: new Date(),
      updatedAt: new Date(),
      messages: this.parseMessages()
    };
  }

  // è§£ææ¶ˆæ¯å†…å®¹
  parseMessages(): Message[] {
    const messageElements = document.querySelectorAll('.message');
    return Array.from(messageElements).map(el => ({
      id: generateId(),
      role: el.classList.contains('user') ? 'user' : 'assistant',
      content: this.parseRichContent(el),
      timestamp: new Date()
    }));
  }

  // è§£æå¯Œæ–‡æœ¬å†…å®¹
  parseRichContent(element: Element): RichContent {
    const codeBlocks = element.querySelectorAll('pre code');
    const images = element.querySelectorAll('img');

    if (codeBlocks.length > 0 || images.length > 0) {
      // æ··åˆå†…å®¹
      return {
        type: 'mixed',
        data: { blocks: this.parseBlocks(element) }
      };
    }

    // çº¯æ–‡æœ¬
    return {
      type: 'text',
      data: { text: element.textContent || '' }
    };
  }
}
```

#### Web åº”ç”¨ç«¯ï¼ˆæ¥æ”¶åŒæ­¥ï¼‰

```typescript
// src/utils/sync.ts
export class SyncManager {
  private messageHandler: (event: MessageEvent) => void;

  constructor() {
    this.messageHandler = this.handleMessage.bind(this);
  }

  // å¯åŠ¨ç›‘å¬
  start() {
    window.addEventListener('message', this.messageHandler);
  }

  // åœæ­¢ç›‘å¬
  stop() {
    window.removeEventListener('message', this.messageHandler);
  }

  // å¤„ç†æ¶ˆæ¯
  private async handleMessage(event: MessageEvent) {
    // éªŒè¯æ¶ˆæ¯æ¥æº
    if (event.source !== window) return;
    if (!event.data.type?.startsWith('CHATMERGEX_')) return;

    const { type, payload } = event.data;

    switch (type) {
      case 'CHATMERGEX_NEW_CONVERSATION':
        await this.handleNewConversation(payload);
        break;
      case 'CHATMERGEX_UPDATE_CONVERSATION':
        await this.handleUpdateConversation(payload);
        break;
      // ... æ›´å¤šæ¶ˆæ¯ç±»å‹
    }
  }

  // å¤„ç†æ–°å¯¹è¯
  private async handleNewConversation(conversation: Conversation) {
    // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨
    const existing = await db.conversations.get(conversation.id);
    if (existing) {
      await db.conversations.update(conversation.id, conversation);
    } else {
      await db.conversations.add(conversation);
    }

    // é€šçŸ¥ UI æ›´æ–°
    useConversationStore.getState().fetchConversations();
  }
}
```

### 5.4 æœç´¢æ¨¡å—

```typescript
// src/utils/search.ts
import Fuse from 'fuse.js';
import { db } from '@/db/database';
import { Conversation } from '@/types';

export class SearchEngine {
  private fuse: Fuse<Conversation> | null = null;

  // åˆå§‹åŒ–æœç´¢å¼•æ“
  async initialize() {
    const conversations = await db.conversations.toArray();

    this.fuse = new Fuse(conversations, {
      keys: ['title', 'messages.content.data.text'],
      threshold: 0.3,
      includeScore: true
    });
  }

  // æœç´¢
  search(query: string): Conversation[] {
    if (!this.fuse) return [];

    const results = this.fuse.search(query);
    return results.map(result => result.item);
  }

  // é«˜çº§æœç´¢ï¼ˆå¸¦ç­›é€‰ï¼‰
  async advancedSearch(options: {
    query: string;
    platform?: string[];
    folderId?: string;
    dateRange?: { start: Date; end: Date };
  }): Promise<Conversation[]> {
    let results = await db.conversations.toArray();

    // å¹³å°ç­›é€‰
    if (options.platform && options.platform.length > 0) {
      results = results.filter(c => options.platform!.includes(c.platform));
    }

    // æ–‡ä»¶å¤¹ç­›é€‰
    if (options.folderId) {
      results = results.filter(c => c.folderId === options.folderId);
    }

    // æ—¶é—´ç­›é€‰
    if (options.dateRange) {
      results = results.filter(c =>
        c.createdAt >= options.dateRange!.start &&
        c.createdAt <= options.dateRange!.end
      );
    }

    // å…³é”®è¯æœç´¢
    if (options.query) {
      const fuse = new Fuse(results, {
        keys: ['title', 'messages.content.data.text'],
        threshold: 0.3
      });
      results = fuse.search(options.query).map(r => r.item);
    }

    return results;
  }
}
```

### 5.5 å¯¼å‡ºæ¨¡å—

```typescript
// src/utils/export.ts
import { Conversation } from '@/types';

export class ExportManager {
  // å¯¼å‡ºä¸º Markdown
  exportToMarkdown(conversation: Conversation): string {
    let markdown = `# ${conversation.title}\n\n`;
    markdown += `**Platform**: ${conversation.platform}\n`;
    markdown += `**Created**: ${conversation.createdAt.toLocaleString()}\n`;
    markdown += `**URL**: ${conversation.url}\n\n`;
    markdown += `---\n\n`;

    conversation.messages.forEach(message => {
      const role = message.role === 'user' ? 'ğŸ‘¤ User' : 'ğŸ¤– AI';
      markdown += `## ${role}\n\n`;
      markdown += this.renderContent(message.content);
      markdown += `\n\n`;
    });

    return markdown;
  }

  // å¯¼å‡ºä¸º JSON
  exportToJSON(conversations: Conversation[]): string {
    return JSON.stringify(conversations, null, 2);
  }

  // å¯¼å‡ºä¸º HTML
  exportToHTML(conversation: Conversation): string {
    // ... HTML æ¨¡æ¿
  }

  // ä¸‹è½½æ–‡ä»¶
  download(content: string, filename: string, mimeType: string) {
    const blob = new Blob([content], { type: mimeType });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = filename;
    a.click();
    URL.revokeObjectURL(url);
  }
}
```

---

## 6. æ•°æ®æµè®¾è®¡

### 6.1 åŒæ­¥æ•°æ®æµ

```
AI å¹³å°é¡µé¢ DOM å˜åŒ–
        â†“
MutationObserver ç›‘å¬
        â†“
Content Script è§£æå†…å®¹
        â†“
æå–å¯¹è¯æ•°æ®ï¼ˆæ ‡é¢˜ã€æ¶ˆæ¯ã€æ—¶é—´ç­‰ï¼‰
        â†“
chrome.runtime.sendMessage â†’ Background Service Worker
        â†“
æ•°æ®éªŒè¯å’Œè½¬æ¢
        â†“
window.postMessage â†’ Web åº”ç”¨
        â†“
SyncManager æ¥æ”¶æ¶ˆæ¯
        â†“
å­˜å‚¨åˆ° IndexedDB (Dexie.js)
        â†“
è§¦å‘ Store æ›´æ–°
        â†“
React ç»„ä»¶é‡æ–°æ¸²æŸ“
```

### 6.2 ç”¨æˆ·æ“ä½œæ•°æ®æµ

#### åˆ›å»ºæ–‡ä»¶å¤¹

```
ç”¨æˆ·ç‚¹å‡»"æ–°å»ºæ–‡ä»¶å¤¹"
        â†“
æ‰“å¼€è¾“å…¥å¯¹è¯æ¡†
        â†“
ç”¨æˆ·è¾“å…¥æ–‡ä»¶å¤¹åç§°
        â†“
è°ƒç”¨ folderStore.createFolder()
        â†“
å†™å…¥ IndexedDB
        â†“
æ›´æ–° Store çŠ¶æ€
        â†“
UI æ˜¾ç¤ºæ–°æ–‡ä»¶å¤¹
```

#### æœç´¢å¯¹è¯

```
ç”¨æˆ·è¾“å…¥æœç´¢å…³é”®è¯
        â†“
è§¦å‘ searchStore.search()
        â†“
è°ƒç”¨ SearchEngine.advancedSearch()
        â†“
æŸ¥è¯¢ IndexedDB
        â†“
æ¨¡ç³ŠåŒ¹é…ï¼ˆFuse.jsï¼‰
        â†“
è¿”å›ç»“æœåˆ—è¡¨
        â†“
æ›´æ–° searchStore.results
        â†“
UI æ˜¾ç¤ºæœç´¢ç»“æœ
```

#### å¯¼å‡ºå¯¹è¯

```
ç”¨æˆ·é€‰æ‹©å¯¹è¯å¹¶ç‚¹å‡»"å¯¼å‡º"
        â†“
é€‰æ‹©å¯¼å‡ºæ ¼å¼ï¼ˆMarkdown/JSON/HTMLï¼‰
        â†“
è°ƒç”¨ ExportManager.exportToXXX()
        â†“
ä» IndexedDB è¯»å–å®Œæ•´æ•°æ®
        â†“
æ ¼å¼è½¬æ¢
        â†“
ç”Ÿæˆæ–‡ä»¶å†…å®¹
        â†“
è§¦å‘æµè§ˆå™¨ä¸‹è½½
```

---

## 7. é€šä¿¡æœºåˆ¶

### 7.1 æ’ä»¶å†…éƒ¨é€šä¿¡

#### Content Script â†” Background Service Worker

```typescript
// Content Script å‘é€æ¶ˆæ¯
chrome.runtime.sendMessage({
  type: 'NEW_CONVERSATION',
  payload: conversationData
});

// Background æ¥æ”¶æ¶ˆæ¯
chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {
  if (message.type === 'NEW_CONVERSATION') {
    // å¤„ç†é€»è¾‘
    sendResponse({ success: true });
  }
});
```

### 7.2 æ’ä»¶ä¸ Web åº”ç”¨é€šä¿¡

#### æ’ä»¶ â†’ Web åº”ç”¨

```typescript
// Background Service Worker
window.postMessage({
  type: 'CHATMERGEX_NEW_CONVERSATION',
  payload: conversationData
}, '*');

// Web åº”ç”¨æ¥æ”¶
window.addEventListener('message', (event) => {
  if (event.data.type === 'CHATMERGEX_NEW_CONVERSATION') {
    // å¤„ç†æ•°æ®
  }
});
```

#### Web åº”ç”¨ â†’ æ’ä»¶

```typescript
// Web åº”ç”¨å‘é€
window.postMessage({
  type: 'CHATMERGEX_REQUEST_SYNC',
  payload: { platform: 'chatgpt' }
}, '*');

// æ’ä»¶æ¥æ”¶ï¼ˆé€šè¿‡ Content Scriptï¼‰
window.addEventListener('message', (event) => {
  if (event.data.type === 'CHATMERGEX_REQUEST_SYNC') {
    // è§¦å‘åŒæ­¥
  }
});
```

### 7.3 æ¶ˆæ¯åè®®

```typescript
// æ¶ˆæ¯ç±»å‹å®šä¹‰
interface Message<T = any> {
  type: MessageType;
  payload: T;
  timestamp: number;
  id: string;
}

enum MessageType {
  // åŒæ­¥ç›¸å…³
  NEW_CONVERSATION = 'CHATMERGEX_NEW_CONVERSATION',
  UPDATE_CONVERSATION = 'CHATMERGEX_UPDATE_CONVERSATION',
  DELETE_CONVERSATION = 'CHATMERGEX_DELETE_CONVERSATION',

  // æ§åˆ¶ç›¸å…³
  REQUEST_SYNC = 'CHATMERGEX_REQUEST_SYNC',
  SYNC_STATUS = 'CHATMERGEX_SYNC_STATUS',

  // é”™è¯¯ç›¸å…³
  ERROR = 'CHATMERGEX_ERROR'
}
```

---

## 8. æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 8.1 å‰ç«¯æ€§èƒ½ä¼˜åŒ–

#### è™šæ‹Ÿæ»šåŠ¨
```typescript
// ä½¿ç”¨ react-window ä¼˜åŒ–é•¿åˆ—è¡¨
import { FixedSizeList } from 'react-window';

<FixedSizeList
  height={600}
  itemCount={conversations.length}
  itemSize={80}
  width="100%"
>
  {({ index, style }) => (
    <ConversationItem
      style={style}
      conversation={conversations[index]}
    />
  )}
</FixedSizeList>
```

#### æ‡’åŠ è½½
```typescript
// è·¯ç”±æ‡’åŠ è½½
const Settings = lazy(() => import('@/pages/Settings'));

<Suspense fallback={<LoadingSpinner />}>
  <Settings />
</Suspense>
```

#### é˜²æŠ–å’ŒèŠ‚æµ
```typescript
// æœç´¢é˜²æŠ–
import { debounce } from 'lodash-es';

const handleSearch = debounce((query: string) => {
  searchStore.search(query);
}, 300);
```

### 8.2 æ•°æ®åº“æ€§èƒ½ä¼˜åŒ–

#### ç´¢å¼•ä¼˜åŒ–
```typescript
// åˆ›å»ºå¤åˆç´¢å¼•
this.version(1).stores({
  conversations: 'id, [platform+folderId], createdAt, updatedAt, title'
});
```

#### æ‰¹é‡æ“ä½œ
```typescript
// æ‰¹é‡æ’å…¥
await db.conversations.bulkAdd(conversations);

// æ‰¹é‡åˆ é™¤
await db.conversations.bulkDelete(ids);
```

#### æŸ¥è¯¢ä¼˜åŒ–
```typescript
// ä½¿ç”¨ç´¢å¼•æŸ¥è¯¢
await db.conversations
  .where('platform')
  .equals('chatgpt')
  .and(c => c.createdAt > startDate)
  .toArray();
```

### 8.3 æ’ä»¶æ€§èƒ½ä¼˜åŒ–

#### å‡å°‘ DOM æŸ¥è¯¢
```typescript
// ç¼“å­˜é€‰æ‹©å™¨
class ChatGPTParser {
  private selectors = {
    conversation: '[data-testid^="conversation-"]',
    message: '.message',
    title: '.conversation-title'
  };

  // ä½¿ç”¨ç¼“å­˜çš„é€‰æ‹©å™¨
  parseConversation(element: Element) {
    const title = element.querySelector(this.selectors.title);
    // ...
  }
}
```

#### èŠ‚æµç›‘å¬
```typescript
// èŠ‚æµ MutationObserver å›è°ƒ
const throttledCallback = throttle((mutations) => {
  this.handleMutations(mutations);
}, 1000);

const observer = new MutationObserver(throttledCallback);
```

---

## 9. å®‰å…¨è®¾è®¡

### 9.1 æ•°æ®å®‰å…¨

#### æœ¬åœ°å­˜å‚¨åŠ å¯†ï¼ˆå¯é€‰ï¼‰
```typescript
// ä½¿ç”¨ Web Crypto API åŠ å¯†æ•æ„Ÿæ•°æ®
async function encrypt(data: string, key: CryptoKey): Promise<string> {
  const encoder = new TextEncoder();
  const dataBuffer = encoder.encode(data);
  const encrypted = await crypto.subtle.encrypt(
    { name: 'AES-GCM', iv: crypto.getRandomValues(new Uint8Array(12)) },
    key,
    dataBuffer
  );
  return btoa(String.fromCharCode(...new Uint8Array(encrypted)));
}
```

#### æ•°æ®éªŒè¯
```typescript
// éªŒè¯åŒæ­¥æ•°æ®çš„å®Œæ•´æ€§
function validateConversation(data: any): data is Conversation {
  return (
    typeof data.id === 'string' &&
    typeof data.title === 'string' &&
    Array.isArray(data.messages) &&
    data.messages.every(validateMessage)
  );
}
```

### 9.2 XSS é˜²æŠ¤

#### å†…å®¹è½¬ä¹‰
```typescript
// æ¸²æŸ“ç”¨æˆ·å†…å®¹æ—¶è½¬ä¹‰
import DOMPurify from 'dompurify';

function renderHTML(html: string) {
  const clean = DOMPurify.sanitize(html);
  return <div dangerouslySetInnerHTML={{ __html: clean }} />;
}
```

#### CSP ç­–ç•¥
```html
<!-- public/index.html -->
<meta http-equiv="Content-Security-Policy"
      content="default-src 'self';
               script-src 'self' 'unsafe-inline';
               style-src 'self' 'unsafe-inline';">
```

### 9.3 æ’ä»¶å®‰å…¨

#### æƒé™æœ€å°åŒ–
```json
// manifest.json
{
  "permissions": [
    "storage",
    "activeTab"
  ],
  "host_permissions": [
    "https://chat.openai.com/*",
    "https://www.doubao.com/*"
  ]
}
```

#### æ¶ˆæ¯éªŒè¯
```typescript
// éªŒè¯æ¶ˆæ¯æ¥æº
window.addEventListener('message', (event) => {
  // åªæ¥å—æ¥è‡ªåŒåŸŸçš„æ¶ˆæ¯
  if (event.origin !== window.location.origin) return;

  // éªŒè¯æ¶ˆæ¯æ ¼å¼
  if (!isValidMessage(event.data)) return;

  // å¤„ç†æ¶ˆæ¯
  handleMessage(event.data);
});
```

---

## 10. éƒ¨ç½²å’Œå‘å¸ƒ

### 10.1 Web åº”ç”¨éƒ¨ç½²

#### Vercel éƒ¨ç½²
```bash
# å®‰è£… Vercel CLI
npm i -g vercel

# éƒ¨ç½²
vercel deploy --prod
```

#### é…ç½®æ–‡ä»¶
```json
// vercel.json
{
  "framework": "nextjs"
}
```

### 10.2 æµè§ˆå™¨æ’ä»¶å‘å¸ƒ

#### æ‰“åŒ…æ’ä»¶
```bash
npm run build
# ç”Ÿæˆ extension.zip
```

#### Chrome Web Store å‘å¸ƒæµç¨‹
1. åˆ›å»ºå¼€å‘è€…è´¦å·
2. ä¸Šä¼  ZIP æ–‡ä»¶
3. å¡«å†™å•†åº—ä¿¡æ¯
4. æäº¤å®¡æ ¸
5. ç­‰å¾…æ‰¹å‡†ï¼ˆé€šå¸¸ 1-3 å¤©ï¼‰

---

## é™„å½•

### A. æŠ€æœ¯é€‰å‹å¯¹æ¯”

| æŠ€æœ¯ | é€‰æ‹© | å¤‡é€‰æ–¹æ¡ˆ | é€‰æ‹©ç†ç”± |
|------|------|----------|----------|
| å‰ç«¯æ¡†æ¶ | Next.js | Vite, SvelteKit | å…¨æ ˆèƒ½åŠ›ï¼Œç”Ÿæ€æˆç†Ÿï¼Œä¸ç«å“å¯¹é½ |
| UI åº“ | shadcn/ui | Ant Design, Material-UI | è½»é‡ã€å¯å®šåˆ¶ã€æ— è¿è¡Œæ—¶ä¾èµ– |
| çŠ¶æ€ç®¡ç† | Zustand | Redux, Jotai | ç®€å•ã€è½»é‡ã€æ— æ ·æ¿ä»£ç  |
| æ•°æ®å­˜å‚¨ | IndexedDB | LocalStorage, SQLite WASM | å®¹é‡å¤§ã€æ”¯æŒç´¢å¼• |
| IndexedDB å°è£… | Dexie.js | idb, localForage | API å‹å¥½ã€TypeScript æ”¯æŒ |
| æ„å»ºå·¥å…· | Next.js (å†…ç½®) | Vite, Webpack | æ¡†æ¶é›†æˆï¼Œæ— éœ€é¢å¤–é…ç½® |

### B. æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | æµ‹é‡æ–¹æ³• |
|------|--------|----------|
| é¦–å±åŠ è½½æ—¶é—´ | < 2s | Lighthouse |
| åˆ—è¡¨æ¸²æŸ“æ€§èƒ½ | 60 FPS | Chrome DevTools |
| æœç´¢å“åº”æ—¶é—´ | < 500ms | Performance API |
| æ’ä»¶å†…å­˜å ç”¨ | < 50MB | Task Manager |
| IndexedDB æŸ¥è¯¢ | < 100ms | Performance.now() |

### C. å¼€å‘è§„èŒƒ

#### å‘½åè§„èŒƒ
- ç»„ä»¶ï¼šPascalCaseï¼ˆå¦‚ `ConversationList`ï¼‰
- å‡½æ•°ï¼šcamelCaseï¼ˆå¦‚ `fetchConversations`ï¼‰
- å¸¸é‡ï¼šUPPER_SNAKE_CASEï¼ˆå¦‚ `API_BASE_URL`ï¼‰
- ç±»å‹ï¼šPascalCase + æè¿°æ€§åç¼€ï¼ˆå¦‚ `ConversationStore`ï¼‰

#### Git æäº¤è§„èŒƒ
```
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤ bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·ç›¸å…³
```

---

**æ–‡æ¡£ç»“æŸ**

å¦‚æœ‰æŠ€æœ¯é—®é¢˜ï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿã€‚
